<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.70.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Linux命令-用户、权限管理 &middot; 梦还在吗</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="http://example.org/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://example.org/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://example.org/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://example.org/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class="theme-base-0d ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://example.org/"><h1>梦还在吗</h1></a>
      <p class="lead">
       随便记录悲惨世界 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://example.org/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Linux命令-用户、权限管理</h1>
  <time datetime=2020-05-11T12:58:03Z class="post-date">Mon, May 11, 2020</time>
  <h1 id="linux命令-用户权限管理">Linux命令-用户、权限管理</h1>
<h2 id="查看当前用户whoami">查看当前用户：whoami</h2>
<p>whoami该命令用户查看当前系统当前账号的用户名。可通过cat /etc/passwd查看系统用户信息。</p>
<p>由于系统管理员通常需要使用多种身份登录系统，例如通常使用普通用户登录系统，然后再以su命令切换到root身份对传统进行管理。这时候就可以使用whoami来查看当前用户的身份。</p>
<h2 id="查看登录用户who">查看登录用户：who</h2>
<p>who命令用于查看当前所有登录系统的用户信息。</p>
<p>常用选项：</p>
<table>
<thead>
<tr>
<th align="center">选项</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">-m或am I</td>
<td align="center">只显示运行who命令的用户名、登录终端和登录时间</td>
</tr>
<tr>
<td align="center">-q或&ndash;count</td>
<td align="center">只显示用户的登录账号和登录用户的数量</td>
</tr>
<tr>
<td align="center">-u</td>
<td align="center">在登录时间后显示该用户最后一次操作到当前的时间间隔</td>
</tr>
<tr>
<td align="center">-u或&ndash;heading</td>
<td align="center">显示列标题</td>
</tr>
</tbody>
</table>
<h2 id="退出登录账户-exit">退出登录账户： exit</h2>
<p>如果是图形界面，退出当前终端；</p>
<p>如果是使用ssh远程登录，退出登陆账户；</p>
<p>如果是切换后的登陆用户，退出则返回上一个登陆账号。</p>
<h2 id="添加用户账号useradd">添加用户账号：useradd</h2>
<p>在Unix/Linux中添加用户账号可以使用adduser或useradd命令，因为adduser命令是指向useradd命令的一个链接，因此，这两个命令的使用格式完全一样。</p>
<p>useradd命令的使用格式如下： useradd [参数] 新建用户账号</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">-d</td>
<td align="center">指定用户登录系统时的主目录，如果不使用该参数，系统自动在/home目录下建立与用户名同名目录为主目录</td>
</tr>
<tr>
<td align="center">-m</td>
<td align="center">自动建立目录</td>
</tr>
<tr>
<td align="center">-g</td>
<td align="center">指定组名称</td>
</tr>
</tbody>
</table>
<ul>
<li></li>
</ul>
<p>相关说明：</p>
<p>Linux每个用户都要有一个主目录，主目录就是第一次登陆系统，用户的默认当前目录(/home/用户)；
每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定给用户指定一个主目录；
用户的主目录一般要放到根目录的home目录下，用户的主目录和用户名是相同的；
如果创建用户的时候，不指定组名，那么系统会自动创建一个和用户名一样的组名。</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">useradd -d /home/abc abc -m</td>
<td align="center">创建abc用户，如果/home/abc目录不存在，就自动创建这个目录，同时用户属于abc组</td>
</tr>
<tr>
<td align="center">useradd -d /home/a a -g test -m</td>
<td align="center">创建一个用户名字叫a，主目录在/home/a，如果主目录不存在，就自动创建主目录，同时用户属于test组</td>
</tr>
<tr>
<td align="center">cat /etc/passwd</td>
<td align="center">查看系统当前用户名</td>
</tr>
</tbody>
</table>
<h2 id="设置用户密码passwd">设置用户密码：passwd</h2>
<p>在Unix/Linux中，超级用户可以使用passwd命令为普通用户设置或修改用户口令。用户也可以直接使用该命令来修改自己的口令，而无需在命令后面使用用户名。
<img src="https://i.loli.net/2020/03/23/GbNiPmY6QpeTzXx.png" alt="image.png"></p>
<h2 id="删除用户userdel">删除用户：userdel</h2>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">userdel abc(用户名)</td>
<td align="center">删除abc用户，但不会自动删除用户的主目录</td>
</tr>
<tr>
<td align="center">userdel -r abc(用户名)</td>
<td align="center">删除用户，同时删除用户的主目录</td>
</tr>
</tbody>
</table>
<h2 id="切换用户su">切换用户：su</h2>
<p>可以通过su命令切换用户，su后面可以加“-”。su和su –命令不同之处在于，su -切换到对应的用户时会将当前的工作目录自动转换到切换后的用户主目录：
<img src="https://i.loli.net/2020/03/23/eyXHxmJAI5LZPW6.png" alt="image.png"></p>
<p>注意：如果是ubuntu平台，需要在命令前加“sudo”，如果在某些操作需要管理员才能操作，ubuntu无需切换到root用户即可操作，只需加“sudo”即可。sudo是ubuntu平台下允许系统管理员让普通用户执行一些或者全部的root命令的一个工具，减少了root 用户的登陆和管理时间，提高了安全性。</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">su</td>
<td align="center">切换到root用户</td>
</tr>
<tr>
<td align="center">su root</td>
<td align="center">切换到root用户</td>
</tr>
<tr>
<td align="center">su -</td>
<td align="center">切换到root用户，同时切换目录到/root</td>
</tr>
<tr>
<td align="center">su - root</td>
<td align="center">切换到root用户，同时切换目录到/root</td>
</tr>
<tr>
<td align="center">su 普通用户</td>
<td align="center">切换到普通用户</td>
</tr>
<tr>
<td align="center">su - 普通用户</td>
<td align="center">切换到普通用户，同时切换普通用户所在的目录</td>
</tr>
</tbody>
</table>
<h2 id="添加删除组账号groupaddgroupdel">添加、删除组账号：groupadd、groupdel</h2>
<p>groupadd 新建组账号 groupdel 组账号 cat /etc/group 查看用户组
<img src="https://i.loli.net/2020/03/23/142wX3TMW5b7FnN.png" alt="image.png"></p>
<h2 id="修改用户所在组usermod">修改用户所在组：usermod</h2>
<p>使用方法：usermod -g 用户组 用户名</p>
<p><img src="https://i.loli.net/2020/03/23/IaQ8OLGwUXxo7Vf.png" alt="image.png"></p>
<h2 id="修改文件权限chmod">修改文件权限：chmod</h2>
<p>chmod 修改文件权限有两种使用格式：字母法与数字法。</p>
<p>字母法：chmod u/g/o/a +/-/= rwx 文件</p>
<table>
<thead>
<tr>
<th align="center">[ u/g/o/a ]</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">u</td>
<td align="center">user 表示该文件的所有者</td>
</tr>
<tr>
<td align="center">g</td>
<td align="center">group 表示与该文件的所有者属于同一组( group )者，即用户组</td>
</tr>
<tr>
<td align="center">o</td>
<td align="center">other 表示其他以外的人</td>
</tr>
<tr>
<td align="center">a</td>
<td align="center">all 表示这三者皆是</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="center">[ +-= ]</th>
<th align="center">含义</th>
</tr>
</thead>
</table>
<ul>
<li>|增加权限</li>
</ul>
<ul>
<li>|撤销权限
=	|设定权限</li>
</ul>
<table>
<thead>
<tr>
<th align="center">rwx</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">r</td>
<td align="center">read 表示可读取，对于一个目录，如果没有r权限，那么就意味着不能通过ls查看这个目录的内容。</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">write 表示可写入，对于一个目录，如果没有w权限，那么就意味着不能在目录下创建新的文件。</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">excute 表示可执行，对于一个目录，如果没有x权限，那么就意味着不能通过cd进入这个目录。</td>
</tr>
</tbody>
</table>
<p>chmod o+w file 给文件file的其它用户增加写权限：
<img src="https://i.loli.net/2020/03/23/SfMTUB4rdGcs3Zy.png" alt="image.png"></p>
<p>chmod u-r file 给文件file的拥有者减去读的权限：
<img src="https://i.loli.net/2020/03/23/jUT1g3KckAHot8z.png" alt="image.png"></p>
<p>chmod g=x file设置文件file的同组用户的权限为可执行，同时去除读、写权限：
<img src="https://i.loli.net/2020/03/23/Pas2gbUQhO7wkEG.png" alt="image.png"></p>
<p>如果需要同时进行设定拥有者、同组者以及其他人的权限，参考如下：
<img src="https://i.loli.net/2020/03/23/SzwrIsoYAQnhyJ6.png" alt="image.png">
<img src="https://i.loli.net/2020/03/23/nWAKwSdH3NTXYtG.png" alt="image.png"></p>
<p>数字法：“rwx” 这些权限也可以用数字来代替</p>
<table>
<thead>
<tr>
<th align="center">字母</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">r</td>
<td align="center">读取权限，数字代号为 &ldquo;4&rdquo;</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">写入权限，数字代号为 &ldquo;2&rdquo;</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">执行权限，数字代号为 &ldquo;1&rdquo;</td>
</tr>
</tbody>
</table>
<ul>
<li>|不具任何权限，数字代号为 &ldquo;0&rdquo;
如执行：chmod u=rwx,g=rx,o=r filename 就等同于：chmod u=7,g=5,o=4 filename</li>
</ul>
<p>chmod 751 file：</p>
<p>文件所有者：读、写、执行权限
同组用户：读、执行的权限
其它用户：执行的权限
<img src="https://i.loli.net/2020/03/23/ntxhf5YAzu9VaI6.png" alt="image.png">
chmod 777 file：所有用户拥有读、写、执行权限
<img src="https://i.loli.net/2020/03/23/X5AK8IONaiZRq9e.png" alt="image.png">
注意：如果想递归所有目录加上相同权限，需要加上参数“ -R ”。 如：chmod 777 test/ -R 递归 test 目录下所有文件加 777 权限</p>
<h2 id="修改文件所有者chown">修改文件所有者：chown</h2>
<p><img src="https://i.loli.net/2020/03/23/BOMTq1DJzfdVh4L.png" alt="image.png"></p>
<h2 id="修改文件所属组chgrp">修改文件所属组：chgrp</h2>
<p><img src="https://i.loli.net/2020/03/23/jrPK9LUuncvJpzl.png" alt="image.png"></p>

</div>


    </main>

    
      
    
  </body>
</html>
